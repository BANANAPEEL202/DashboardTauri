!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.openmct=t():e.openmct=t()}(this,(()=>(function(){var e={subscribe:function(e){var r=e.data,i=Date.now(),f=1e3/r.dataRateInHz,c=i-i%f+f;let m;m=r.spectra?function(t){for(;c<t;){const t=Object.create(e);e.data.start=c-6e4,e.data.end=c,a(t),c+=f}return c}:function(t){for(;c<t;)self.postMessage({id:e.id,data:{name:r.name,utc:c,yesterday:c-864e5,sin:s(c,r.period,r.amplitude,r.offset,r.phase,r.randomness,r.infinityValues,r.exceedFloat32),wavelengths:d(),intensities:u(),cos:o(c,r.period,r.amplitude,r.offset,r.phase,r.randomness,r.infinityValues,r.exceedFloat32)}}),c+=f;return c},t[e.id]=m,n()},unsubscribe:function(e){delete t[e.data.id]},request:a},t={};function n(e){var a=Date.now(),r=Math.min.apply(Math,Object.values(t).map((function(e){return e(a)})))-a;r<0&&(r=0),Number.isFinite(r)&&setTimeout(n,r)}function a(e){var t=e.data;void 0===t.end&&(t.end=Date.now()),void 0===t.start&&(t.start=t.end-9e5);for(var n=Date.now(),a=t.start,i=t.end>n?n:t.end,f=t.amplitude,c=t.period,m=t.offset,h=t.dataRateInHz,l=t.phase,p=t.randomness,I=Math.max(t.loadDelay,0),M=t.infinityValues,g=t.exceedFloat32,y=1e3/h,b=a-a%y+y,v=[];b<i&&v.length<5e3;b+=y)v.push({utc:b,yesterday:b-864e5,sin:s(b,c,f,m,l,p,M,g),wavelengths:d(),intensities:u(),cos:o(b,c,f,m,l,p,M,g)});0===I?r(e,t,v):setTimeout((()=>r(e,t,v)),I)}function r(e,t,n){self.postMessage({id:e.id,data:t.spectra?{wavelength:n.map((e=>e.wavelength)),cos:n.map((e=>e.cos))}:n})}function o(e,t,n,a,r,o,s,d){if(s&&d){if(Math.random()>.5)return Number.POSITIVE_INFINITY;if(Math.random()<.01)return i()}else{if(s&&Math.random()>.5)return Number.POSITIVE_INFINITY;if(d&&Math.random()<.01)return i()}return n*Math.cos(r+e/t/1e3*Math.PI*2)+n*Math.random()*o+a}function s(e,t,n,a,r,o,s,d){if(s&&d){if(Math.random()>.5)return Number.POSITIVE_INFINITY;if(Math.random()<.01)return i()}else{if(s&&Math.random()>.5)return Number.POSITIVE_INFINITY;if(d&&Math.random()<.01)return i()}return n*Math.sin(r+e/t/1e3*Math.PI*2)+n*Math.random()*o+a}function i(){return 34e38*(Math.random()>.5?1:-1)}function d(){let e=[];for(;e.length<5;){const t=100*Math.random();e.includes(t)||e.push(String(t))}return e}function u(){let e=[];for(;e.length<5;){const t=10*Math.random();e.includes(t)||e.push(String(t))}return e}function f(e,t){self.postMessage({error:e.name+": "+e.message,message:t,id:t.id})}self.onmessage=function(t){var n=t.data,a=e[n.request];if(a)try{a(n)}catch(e){f(e,n)}else f(new Error("unknown message type"),n)}}(),{})));
//# sourceMappingURL=generatorWorker.js.map